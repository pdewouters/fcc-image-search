{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;AACA,QAAQ,QAAR,EAAkB,MAAlB;;AAMA,IAAM,MAAM,wBAAN;AACN,IAAI,GAAJ,CAAQ,MAAR,EAAiB,QAAQ,GAAR,CAAY,IAAZ,IAAoB,IAApB,CAAjB;;AAEA,IAAI,GAAJ,CAAQ,GAAR,EAAa,UAAC,GAAD,EAAM,GAAN,EAAc;AACvB,QAAI,IAAJ,CAAS,kBAAT,EADuB;CAAd,CAAb;;;AAKA,IAAI,GAAJ,CAAQ,iCAAR,EAA2C,UAAC,GAAD,EAAM,GAAN,EAAc;AACrD,YAAQ,GAAR,CAAY,IAAI,MAAJ,CAAW,MAAX,CAAZ,CADqD;AAErD,YAAQ,GAAR,CAAY,IAAI,KAAJ,CAAZ,CAFqD;AAGrD,QAAM,UAAU;AACZ,aAAK,+CAA+C,sBAAY,MAAZ,CAAmB,IAAI,MAAJ,CAAW,MAAX,CAAlE,GAAuF,GAAvF,GAA8F,sBAAY,SAAZ,CAAsB,IAAI,KAAJ,CAApH;AACL,iBAAS,EAAC,iBAAiB,eAAe,QAAQ,GAAR,CAAY,gBAAZ,EAA1C;KAFE,CAH+C;;AAQrD,aAAS,QAAT,CAAkB,KAAlB,EAAyB,QAAzB,EAAmC,IAAnC,EAAyC;AACrC,YAAI,CAAC,KAAD,IAAU,SAAS,UAAT,IAAuB,GAAvB,EAA4B;AACtC,gBAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CAAP,CADkC;AAEtC,gBAAI,IAAJ,CAAS,IAAT,EAFsC;SAA1C;KADJ;AAMA,2BAAQ,OAAR,EAAgB,QAAhB,EAdqD;CAAd,CAA3C;;;AAkBA,IAAI,GAAJ,CAAQ,IAAR,EAAc,UAAC,GAAD,EAAM,GAAN,EAAc;AACxB,QAAI,MAAJ,CAAW,cAAX,EAA2B,kBAA3B,EADwB;AAExB,QAAI,IAAJ,CAAS,KAAK,SAAL,CAAe,EAAC,SAAQ,eAAR,EAAhB,CAAT,EAFwB;CAAd,CAAd;;AAKA,IAAM,aAAa,SAAb,UAAa,UAAW;AAC1B,WAAO,QAAQ,QAAR,GAAmB,KAAnB,GAA2B,QAAQ,GAAR,CAAY,MAAZ,CAA3B,GAAiD,GAAjD,CADmB;CAAX;;AAInB,IAAI,MAAJ,CAAW,IAAI,GAAJ,CAAQ,MAAR,CAAX,EAA4B,YAAM;AAChC,YAAQ,GAAR,CAAY,6BAAZ,EAA2C,IAAI,GAAJ,CAAQ,MAAR,CAA3C,EADgC;CAAN,CAA5B","file":"index.js","sourcesContent":["'use strict'\nrequire('dotenv').config();\nimport https from 'https'\nimport express from 'express'\nimport querystring from 'querystring'\nimport concat from 'concat-stream'\nimport request from 'request'\nconst app = express()\napp.set('port', (process.env.PORT || 5000))\n\napp.get('/', (req, res) => {\n    res.send('FCC Image Search')\n})\n\n// /api/imagesearch/lolcats%20funny?offset=10\napp.get('/api/imagesearch/:search(*)/\\?*', (req, res) => {\n    console.log(req.params.search)\n    console.log(req.query)\n    const options = {\n        url: 'https://api.imgur.com/3/gallery/search/?q=' + querystring.escape(req.params.search) + '&' +  querystring.stringify(req.query),\n        headers: {'Authorization': 'Client-ID ' + process.env.IMGUR_CLIENT_KEY}\n    }\n    \n    function callback(error, response, body) {\n        if (!error && response.statusCode == 200) {\n            var info = JSON.parse(body);\n            res.send(info)\n        }\n    }\n    request(options,callback)\n})\n\n// Fallback\napp.get('/*', (req, res) => {\n    res.header(\"Content-Type\", \"application/json\")\n    res.send(JSON.stringify({'error':'invalid route'}))\n})\n\nconst getSiteUrl = request => {\n    return request.protocol + '://' + request.get('Host') + '/'\n}\n\napp.listen(app.get('port'), () => {\n  console.log('Node app is running on port', app.get('port'));\n})"]}